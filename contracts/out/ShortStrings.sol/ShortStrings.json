{"abi":[{"type":"error","name":"InvalidShortString","inputs":[]},{"type":"error","name":"StringTooLong","inputs":[{"name":"str","type":"string","internalType":"string"}]}],"bytecode":{"object":"0x6055604b600b8282823980515f1a607314603f577f4e487b71000000000000000000000000000000000000000000000000000000005f525f60045260245ffd5b305f52607381538281f3fe730000000000000000000000000000000000000000301460806040525f5ffdfea2646970667358221220933eb4eafb96e65baca9361ae85581cb0816c338d7fd3d937e4ac5659949ae5f64736f6c634300081c0033","sourceMap":"1255:3046:50:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x730000000000000000000000000000000000000000301460806040525f5ffdfea2646970667358221220933eb4eafb96e65baca9361ae85581cb0816c338d7fd3d937e4ac5659949ae5f64736f6c634300081c0033","sourceMap":"1255:3046:50:-:0;;;;;;;;","linkReferences":{}},"methodIdentifiers":{},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.28+commit.7893614a\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"InvalidShortString\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"str\",\"type\":\"string\"}],\"name\":\"StringTooLong\",\"type\":\"error\"}],\"devdoc\":{\"details\":\"This library provides functions to convert short memory strings into a `ShortString` type that can be used as an immutable variable. Strings of arbitrary length can be optimized using this library if they are short enough (up to 31 bytes) by packing them with their length (1 byte) in a single EVM word (32 bytes). Additionally, a fallback mechanism can be used for every other case. Usage example: ```solidity contract Named {     using ShortStrings for *;     ShortString private immutable _name;     string private _nameFallback;     constructor(string memory contractName) {         _name = contractName.toShortStringWithFallback(_nameFallback);     }     function name() external view returns (string memory) {         return _name.toStringWithFallback(_nameFallback);     } } ```\",\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"lib/openzeppelin-contracts/contracts/utils/ShortStrings.sol\":\"ShortStrings\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":false,\"runs\":200},\"remappings\":[\":@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/\",\":@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/\",\":ds-test/=lib/openzeppelin-contracts-upgradeable/lib/forge-std/lib/ds-test/src/\",\":erc4626-tests/=lib/openzeppelin-contracts-upgradeable/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":halmos-cheatcodes/=lib/openzeppelin-contracts-upgradeable/lib/halmos-cheatcodes/src/\",\":openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":openzeppelin-foundry-upgrades/=lib/openzeppelin-foundry-upgrades/src/\",\":solidity-stringutils/=lib/openzeppelin-foundry-upgrades/lib/solidity-stringutils/\"]},\"sources\":{\"lib/openzeppelin-contracts/contracts/utils/ShortStrings.sol\":{\"keccak256\":\"0x1fcf8cceb1a67e6c8512267e780933c4a3f63ef44756e6c818fda79be51c8402\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://617d7d57f6f9cd449068b4d23daf485676d083aae648e038d05eb3a13291de35\",\"dweb:/ipfs/QmPADWPiGaSzZDFNpFEUx4ZPqhzPkYncBpHyTfAGcfsqzy\"]},\"lib/openzeppelin-contracts/contracts/utils/StorageSlot.sol\":{\"keccak256\":\"0xcf74f855663ce2ae00ed8352666b7935f6cddea2932fdf2c3ecd30a9b1cd0e97\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://9f660b1f351b757dfe01438e59888f31f33ded3afcf5cb5b0d9bf9aa6f320a8b\",\"dweb:/ipfs/QmarDJ5hZEgBtCmmrVzEZWjub9769eD686jmzb2XpSU1cM\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.28+commit.7893614a"},"language":"Solidity","output":{"abi":[{"inputs":[],"type":"error","name":"InvalidShortString"},{"inputs":[{"internalType":"string","name":"str","type":"string"}],"type":"error","name":"StringTooLong"}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/","@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/","ds-test/=lib/openzeppelin-contracts-upgradeable/lib/forge-std/lib/ds-test/src/","erc4626-tests/=lib/openzeppelin-contracts-upgradeable/lib/erc4626-tests/","forge-std/=lib/forge-std/src/","halmos-cheatcodes/=lib/openzeppelin-contracts-upgradeable/lib/halmos-cheatcodes/src/","openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/","openzeppelin-contracts/=lib/openzeppelin-contracts/","openzeppelin-foundry-upgrades/=lib/openzeppelin-foundry-upgrades/src/","solidity-stringutils/=lib/openzeppelin-foundry-upgrades/lib/solidity-stringutils/"],"optimizer":{"enabled":false,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"lib/openzeppelin-contracts/contracts/utils/ShortStrings.sol":"ShortStrings"},"evmVersion":"cancun","libraries":{}},"sources":{"lib/openzeppelin-contracts/contracts/utils/ShortStrings.sol":{"keccak256":"0x1fcf8cceb1a67e6c8512267e780933c4a3f63ef44756e6c818fda79be51c8402","urls":["bzz-raw://617d7d57f6f9cd449068b4d23daf485676d083aae648e038d05eb3a13291de35","dweb:/ipfs/QmPADWPiGaSzZDFNpFEUx4ZPqhzPkYncBpHyTfAGcfsqzy"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/StorageSlot.sol":{"keccak256":"0xcf74f855663ce2ae00ed8352666b7935f6cddea2932fdf2c3ecd30a9b1cd0e97","urls":["bzz-raw://9f660b1f351b757dfe01438e59888f31f33ded3afcf5cb5b0d9bf9aa6f320a8b","dweb:/ipfs/QmarDJ5hZEgBtCmmrVzEZWjub9769eD686jmzb2XpSU1cM"],"license":"MIT"}},"version":1},"storageLayout":{"storage":[],"types":{}},"ast":{"absolutePath":"lib/openzeppelin-contracts/contracts/utils/ShortStrings.sol","id":40146,"exportedSymbols":{"ShortString":[39934],"ShortStrings":[40145],"StorageSlot":[40269]},"nodeType":"SourceUnit","src":"106:4196:50","nodes":[{"id":39930,"nodeType":"PragmaDirective","src":"106:24:50","nodes":[],"literals":["solidity","^","0.8",".20"]},{"id":39932,"nodeType":"ImportDirective","src":"132:46:50","nodes":[],"absolutePath":"lib/openzeppelin-contracts/contracts/utils/StorageSlot.sol","file":"./StorageSlot.sol","nameLocation":"-1:-1:-1","scope":40146,"sourceUnit":40270,"symbolAliases":[{"foreign":{"id":39931,"name":"StorageSlot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40269,"src":"140:11:50","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":39934,"nodeType":"UserDefinedValueTypeDefinition","src":"348:28:50","nodes":[],"canonicalName":"ShortString","name":"ShortString","nameLocation":"353:11:50","underlyingType":{"id":39933,"name":"bytes32","nodeType":"ElementaryTypeName","src":"368:7:50","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}},{"id":40145,"nodeType":"ContractDefinition","src":"1255:3046:50","nodes":[{"id":39938,"nodeType":"VariableDeclaration","src":"1345:111:50","nodes":[],"constant":true,"mutability":"constant","name":"FALLBACK_SENTINEL","nameLocation":"1370:17:50","scope":40145,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":39936,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1345:7:50","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":{"hexValue":"307830303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030304646","id":39937,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1390:66:50","typeDescriptions":{"typeIdentifier":"t_rational_255_by_1","typeString":"int_const 255"},"value":"0x00000000000000000000000000000000000000000000000000000000000000FF"},"visibility":"private"},{"id":39942,"nodeType":"ErrorDefinition","src":"1463:32:50","nodes":[],"errorSelector":"305a27a9","name":"StringTooLong","nameLocation":"1469:13:50","parameters":{"id":39941,"nodeType":"ParameterList","parameters":[{"constant":false,"id":39940,"mutability":"mutable","name":"str","nameLocation":"1490:3:50","nodeType":"VariableDeclaration","scope":39942,"src":"1483:10:50","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string"},"typeName":{"id":39939,"name":"string","nodeType":"ElementaryTypeName","src":"1483:6:50","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"1482:12:50"}},{"id":39944,"nodeType":"ErrorDefinition","src":"1500:27:50","nodes":[],"errorSelector":"b3512b0c","name":"InvalidShortString","nameLocation":"1506:18:50","parameters":{"id":39943,"nodeType":"ParameterList","parameters":[],"src":"1524:2:50"}},{"id":39988,"nodeType":"FunctionDefinition","src":"1708:286:50","nodes":[],"body":{"id":39987,"nodeType":"Block","src":"1786:208:50","nodes":[],"statements":[{"assignments":[39954],"declarations":[{"constant":false,"id":39954,"mutability":"mutable","name":"bstr","nameLocation":"1809:4:50","nodeType":"VariableDeclaration","scope":39987,"src":"1796:17:50","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes"},"typeName":{"id":39953,"name":"bytes","nodeType":"ElementaryTypeName","src":"1796:5:50","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"visibility":"internal"}],"id":39959,"initialValue":{"arguments":[{"id":39957,"name":"str","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39947,"src":"1822:3:50","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}],"id":39956,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"1816:5:50","typeDescriptions":{"typeIdentifier":"t_type$_t_bytes_storage_ptr_$","typeString":"type(bytes storage pointer)"},"typeName":{"id":39955,"name":"bytes","nodeType":"ElementaryTypeName","src":"1816:5:50","typeDescriptions":{}}},"id":39958,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1816:10:50","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}},"nodeType":"VariableDeclarationStatement","src":"1796:30:50"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":39963,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":39960,"name":"bstr","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39954,"src":"1840:4:50","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}},"id":39961,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1845:6:50","memberName":"length","nodeType":"MemberAccess","src":"1840:11:50","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"3331","id":39962,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1854:2:50","typeDescriptions":{"typeIdentifier":"t_rational_31_by_1","typeString":"int_const 31"},"value":"31"},"src":"1840:16:50","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":39969,"nodeType":"IfStatement","src":"1836:72:50","trueBody":{"id":39968,"nodeType":"Block","src":"1858:50:50","statements":[{"errorCall":{"arguments":[{"id":39965,"name":"str","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39947,"src":"1893:3:50","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}],"id":39964,"name":"StringTooLong","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39942,"src":"1879:13:50","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_string_memory_ptr_$returns$_t_error_$","typeString":"function (string memory) pure returns (error)"}},"id":39966,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1879:18:50","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":39967,"nodeType":"RevertStatement","src":"1872:25:50"}]}},{"expression":{"arguments":[{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":39983,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"arguments":[{"id":39978,"name":"bstr","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39954,"src":"1965:4:50","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":39977,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"1957:7:50","typeDescriptions":{"typeIdentifier":"t_type$_t_bytes32_$","typeString":"type(bytes32)"},"typeName":{"id":39976,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1957:7:50","typeDescriptions":{}}},"id":39979,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1957:13:50","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"id":39975,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"1949:7:50","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":39974,"name":"uint256","nodeType":"ElementaryTypeName","src":"1949:7:50","typeDescriptions":{}}},"id":39980,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1949:22:50","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"|","rightExpression":{"expression":{"id":39981,"name":"bstr","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39954,"src":"1974:4:50","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}},"id":39982,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1979:6:50","memberName":"length","nodeType":"MemberAccess","src":"1974:11:50","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1949:36:50","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":39973,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"1941:7:50","typeDescriptions":{"typeIdentifier":"t_type$_t_bytes32_$","typeString":"type(bytes32)"},"typeName":{"id":39972,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1941:7:50","typeDescriptions":{}}},"id":39984,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1941:45:50","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"id":39970,"name":"ShortString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39934,"src":"1924:11:50","typeDescriptions":{"typeIdentifier":"t_type$_t_userDefinedValueType$_ShortString_$39934_$","typeString":"type(ShortString)"}},"id":39971,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"1936:4:50","memberName":"wrap","nodeType":"MemberAccess","src":"1924:16:50","typeDescriptions":{"typeIdentifier":"t_function_wrap_pure$_t_bytes32_$returns$_t_userDefinedValueType$_ShortString_$39934_$","typeString":"function (bytes32) pure returns (ShortString)"}},"id":39985,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1924:63:50","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"}},"functionReturnParameters":39952,"id":39986,"nodeType":"Return","src":"1917:70:50"}]},"documentation":{"id":39945,"nodeType":"StructuredDocumentation","src":"1533:170:50","text":" @dev Encode a string of at most 31 chars into a `ShortString`.\n This will trigger a `StringTooLong` error is the input string is too long."},"implemented":true,"kind":"function","modifiers":[],"name":"toShortString","nameLocation":"1717:13:50","parameters":{"id":39948,"nodeType":"ParameterList","parameters":[{"constant":false,"id":39947,"mutability":"mutable","name":"str","nameLocation":"1745:3:50","nodeType":"VariableDeclaration","scope":39988,"src":"1731:17:50","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string"},"typeName":{"id":39946,"name":"string","nodeType":"ElementaryTypeName","src":"1731:6:50","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"1730:19:50"},"returnParameters":{"id":39952,"nodeType":"ParameterList","parameters":[{"constant":false,"id":39951,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":39988,"src":"1773:11:50","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"},"typeName":{"id":39950,"nodeType":"UserDefinedTypeName","pathNode":{"id":39949,"name":"ShortString","nameLocations":["1773:11:50"],"nodeType":"IdentifierPath","referencedDeclaration":39934,"src":"1773:11:50"},"referencedDeclaration":39934,"src":"1773:11:50","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"}},"visibility":"internal"}],"src":"1772:13:50"},"scope":40145,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":40014,"nodeType":"FunctionDefinition","src":"2078:378:50","nodes":[],"body":{"id":40013,"nodeType":"Block","src":"2152:304:50","nodes":[],"statements":[{"assignments":[39998],"declarations":[{"constant":false,"id":39998,"mutability":"mutable","name":"len","nameLocation":"2170:3:50","nodeType":"VariableDeclaration","scope":40013,"src":"2162:11:50","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":39997,"name":"uint256","nodeType":"ElementaryTypeName","src":"2162:7:50","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":40002,"initialValue":{"arguments":[{"id":40000,"name":"sstr","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39992,"src":"2187:4:50","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"}],"id":39999,"name":"byteLength","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40046,"src":"2176:10:50","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_userDefinedValueType$_ShortString_$39934_$returns$_t_uint256_$","typeString":"function (ShortString) pure returns (uint256)"}},"id":40001,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2176:16:50","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2162:30:50"},{"assignments":[40004],"declarations":[{"constant":false,"id":40004,"mutability":"mutable","name":"str","nameLocation":"2294:3:50","nodeType":"VariableDeclaration","scope":40013,"src":"2280:17:50","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string"},"typeName":{"id":40003,"name":"string","nodeType":"ElementaryTypeName","src":"2280:6:50","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"id":40009,"initialValue":{"arguments":[{"hexValue":"3332","id":40007,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2311:2:50","typeDescriptions":{"typeIdentifier":"t_rational_32_by_1","typeString":"int_const 32"},"value":"32"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_32_by_1","typeString":"int_const 32"}],"id":40006,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"NewExpression","src":"2300:10:50","typeDescriptions":{"typeIdentifier":"t_function_objectcreation_pure$_t_uint256_$returns$_t_string_memory_ptr_$","typeString":"function (uint256) pure returns (string memory)"},"typeName":{"id":40005,"name":"string","nodeType":"ElementaryTypeName","src":"2304:6:50","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}}},"id":40008,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2300:14:50","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}},"nodeType":"VariableDeclarationStatement","src":"2280:34:50"},{"AST":{"nativeSrc":"2349:81:50","nodeType":"YulBlock","src":"2349:81:50","statements":[{"expression":{"arguments":[{"name":"str","nativeSrc":"2370:3:50","nodeType":"YulIdentifier","src":"2370:3:50"},{"name":"len","nativeSrc":"2375:3:50","nodeType":"YulIdentifier","src":"2375:3:50"}],"functionName":{"name":"mstore","nativeSrc":"2363:6:50","nodeType":"YulIdentifier","src":"2363:6:50"},"nativeSrc":"2363:16:50","nodeType":"YulFunctionCall","src":"2363:16:50"},"nativeSrc":"2363:16:50","nodeType":"YulExpressionStatement","src":"2363:16:50"},{"expression":{"arguments":[{"arguments":[{"name":"str","nativeSrc":"2403:3:50","nodeType":"YulIdentifier","src":"2403:3:50"},{"kind":"number","nativeSrc":"2408:4:50","nodeType":"YulLiteral","src":"2408:4:50","type":"","value":"0x20"}],"functionName":{"name":"add","nativeSrc":"2399:3:50","nodeType":"YulIdentifier","src":"2399:3:50"},"nativeSrc":"2399:14:50","nodeType":"YulFunctionCall","src":"2399:14:50"},{"name":"sstr","nativeSrc":"2415:4:50","nodeType":"YulIdentifier","src":"2415:4:50"}],"functionName":{"name":"mstore","nativeSrc":"2392:6:50","nodeType":"YulIdentifier","src":"2392:6:50"},"nativeSrc":"2392:28:50","nodeType":"YulFunctionCall","src":"2392:28:50"},"nativeSrc":"2392:28:50","nodeType":"YulExpressionStatement","src":"2392:28:50"}]},"evmVersion":"cancun","externalReferences":[{"declaration":39998,"isOffset":false,"isSlot":false,"src":"2375:3:50","valueSize":1},{"declaration":39992,"isOffset":false,"isSlot":false,"src":"2415:4:50","valueSize":1},{"declaration":40004,"isOffset":false,"isSlot":false,"src":"2370:3:50","valueSize":1},{"declaration":40004,"isOffset":false,"isSlot":false,"src":"2403:3:50","valueSize":1}],"flags":["memory-safe"],"id":40010,"nodeType":"InlineAssembly","src":"2324:106:50"},{"expression":{"id":40011,"name":"str","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40004,"src":"2446:3:50","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}},"functionReturnParameters":39996,"id":40012,"nodeType":"Return","src":"2439:10:50"}]},"documentation":{"id":39989,"nodeType":"StructuredDocumentation","src":"2000:73:50","text":" @dev Decode a `ShortString` back to a \"normal\" string."},"implemented":true,"kind":"function","modifiers":[],"name":"toString","nameLocation":"2087:8:50","parameters":{"id":39993,"nodeType":"ParameterList","parameters":[{"constant":false,"id":39992,"mutability":"mutable","name":"sstr","nameLocation":"2108:4:50","nodeType":"VariableDeclaration","scope":40014,"src":"2096:16:50","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"},"typeName":{"id":39991,"nodeType":"UserDefinedTypeName","pathNode":{"id":39990,"name":"ShortString","nameLocations":["2096:11:50"],"nodeType":"IdentifierPath","referencedDeclaration":39934,"src":"2096:11:50"},"referencedDeclaration":39934,"src":"2096:11:50","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"}},"visibility":"internal"}],"src":"2095:18:50"},"returnParameters":{"id":39996,"nodeType":"ParameterList","parameters":[{"constant":false,"id":39995,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":40014,"src":"2137:13:50","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string"},"typeName":{"id":39994,"name":"string","nodeType":"ElementaryTypeName","src":"2137:6:50","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"2136:15:50"},"scope":40145,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":40046,"nodeType":"FunctionDefinition","src":"2528:245:50","nodes":[],"body":{"id":40045,"nodeType":"Block","src":"2598:175:50","nodes":[],"statements":[{"assignments":[40024],"declarations":[{"constant":false,"id":40024,"mutability":"mutable","name":"result","nameLocation":"2616:6:50","nodeType":"VariableDeclaration","scope":40045,"src":"2608:14:50","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":40023,"name":"uint256","nodeType":"ElementaryTypeName","src":"2608:7:50","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":40034,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":40033,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"arguments":[{"id":40029,"name":"sstr","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40018,"src":"2652:4:50","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"}],"expression":{"id":40027,"name":"ShortString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39934,"src":"2633:11:50","typeDescriptions":{"typeIdentifier":"t_type$_t_userDefinedValueType$_ShortString_$39934_$","typeString":"type(ShortString)"}},"id":40028,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"2645:6:50","memberName":"unwrap","nodeType":"MemberAccess","src":"2633:18:50","typeDescriptions":{"typeIdentifier":"t_function_unwrap_pure$_t_userDefinedValueType$_ShortString_$39934_$returns$_t_bytes32_$","typeString":"function (ShortString) pure returns (bytes32)"}},"id":40030,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2633:24:50","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"id":40026,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"2625:7:50","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":40025,"name":"uint256","nodeType":"ElementaryTypeName","src":"2625:7:50","typeDescriptions":{}}},"id":40031,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2625:33:50","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"&","rightExpression":{"hexValue":"30784646","id":40032,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2661:4:50","typeDescriptions":{"typeIdentifier":"t_rational_255_by_1","typeString":"int_const 255"},"value":"0xFF"},"src":"2625:40:50","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2608:57:50"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":40037,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":40035,"name":"result","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40024,"src":"2679:6:50","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"3331","id":40036,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2688:2:50","typeDescriptions":{"typeIdentifier":"t_rational_31_by_1","typeString":"int_const 31"},"value":"31"},"src":"2679:11:50","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":40042,"nodeType":"IfStatement","src":"2675:69:50","trueBody":{"id":40041,"nodeType":"Block","src":"2692:52:50","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":40038,"name":"InvalidShortString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39944,"src":"2713:18:50","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":40039,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2713:20:50","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":40040,"nodeType":"RevertStatement","src":"2706:27:50"}]}},{"expression":{"id":40043,"name":"result","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40024,"src":"2760:6:50","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":40022,"id":40044,"nodeType":"Return","src":"2753:13:50"}]},"documentation":{"id":40015,"nodeType":"StructuredDocumentation","src":"2462:61:50","text":" @dev Return the length of a `ShortString`."},"implemented":true,"kind":"function","modifiers":[],"name":"byteLength","nameLocation":"2537:10:50","parameters":{"id":40019,"nodeType":"ParameterList","parameters":[{"constant":false,"id":40018,"mutability":"mutable","name":"sstr","nameLocation":"2560:4:50","nodeType":"VariableDeclaration","scope":40046,"src":"2548:16:50","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"},"typeName":{"id":40017,"nodeType":"UserDefinedTypeName","pathNode":{"id":40016,"name":"ShortString","nameLocations":["2548:11:50"],"nodeType":"IdentifierPath","referencedDeclaration":39934,"src":"2548:11:50"},"referencedDeclaration":39934,"src":"2548:11:50","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"}},"visibility":"internal"}],"src":"2547:18:50"},"returnParameters":{"id":40022,"nodeType":"ParameterList","parameters":[{"constant":false,"id":40021,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":40046,"src":"2589:7:50","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":40020,"name":"uint256","nodeType":"ElementaryTypeName","src":"2589:7:50","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"2588:9:50"},"scope":40145,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":40086,"nodeType":"FunctionDefinition","src":"2887:340:50","nodes":[],"body":{"id":40085,"nodeType":"Block","src":"2996:231:50","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":40063,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"arguments":[{"id":40059,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40049,"src":"3016:5:50","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}],"id":40058,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3010:5:50","typeDescriptions":{"typeIdentifier":"t_type$_t_bytes_storage_ptr_$","typeString":"type(bytes storage pointer)"},"typeName":{"id":40057,"name":"bytes","nodeType":"ElementaryTypeName","src":"3010:5:50","typeDescriptions":{}}},"id":40060,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3010:12:50","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}},"id":40061,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3023:6:50","memberName":"length","nodeType":"MemberAccess","src":"3010:19:50","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"hexValue":"3332","id":40062,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3032:2:50","typeDescriptions":{"typeIdentifier":"t_rational_32_by_1","typeString":"int_const 32"},"value":"32"},"src":"3010:24:50","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":40083,"nodeType":"Block","src":"3094:127:50","statements":[{"expression":{"id":40076,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"arguments":[{"id":40072,"name":"store","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40051,"src":"3134:5:50","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string storage pointer"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_string_storage_ptr","typeString":"string storage pointer"}],"expression":{"id":40069,"name":"StorageSlot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40269,"src":"3108:11:50","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_StorageSlot_$40269_$","typeString":"type(library StorageSlot)"}},"id":40071,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3120:13:50","memberName":"getStringSlot","nodeType":"MemberAccess","referencedDeclaration":40246,"src":"3108:25:50","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_string_storage_ptr_$returns$_t_struct$_StringSlot_$40166_storage_ptr_$","typeString":"function (string storage pointer) pure returns (struct StorageSlot.StringSlot storage pointer)"}},"id":40073,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3108:32:50","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_struct$_StringSlot_$40166_storage_ptr","typeString":"struct StorageSlot.StringSlot storage pointer"}},"id":40074,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"3141:5:50","memberName":"value","nodeType":"MemberAccess","referencedDeclaration":40165,"src":"3108:38:50","typeDescriptions":{"typeIdentifier":"t_string_storage","typeString":"string storage ref"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":40075,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40049,"src":"3149:5:50","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}},"src":"3108:46:50","typeDescriptions":{"typeIdentifier":"t_string_storage","typeString":"string storage ref"}},"id":40077,"nodeType":"ExpressionStatement","src":"3108:46:50"},{"expression":{"arguments":[{"id":40080,"name":"FALLBACK_SENTINEL","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39938,"src":"3192:17:50","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"id":40078,"name":"ShortString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39934,"src":"3175:11:50","typeDescriptions":{"typeIdentifier":"t_type$_t_userDefinedValueType$_ShortString_$39934_$","typeString":"type(ShortString)"}},"id":40079,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"3187:4:50","memberName":"wrap","nodeType":"MemberAccess","src":"3175:16:50","typeDescriptions":{"typeIdentifier":"t_function_wrap_pure$_t_bytes32_$returns$_t_userDefinedValueType$_ShortString_$39934_$","typeString":"function (bytes32) pure returns (ShortString)"}},"id":40081,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3175:35:50","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"}},"functionReturnParameters":40056,"id":40082,"nodeType":"Return","src":"3168:42:50"}]},"id":40084,"nodeType":"IfStatement","src":"3006:215:50","trueBody":{"id":40068,"nodeType":"Block","src":"3036:52:50","statements":[{"expression":{"arguments":[{"id":40065,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40049,"src":"3071:5:50","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}],"id":40064,"name":"toShortString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39988,"src":"3057:13:50","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_string_memory_ptr_$returns$_t_userDefinedValueType$_ShortString_$39934_$","typeString":"function (string memory) pure returns (ShortString)"}},"id":40066,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3057:20:50","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"}},"functionReturnParameters":40056,"id":40067,"nodeType":"Return","src":"3050:27:50"}]}}]},"documentation":{"id":40047,"nodeType":"StructuredDocumentation","src":"2779:103:50","text":" @dev Encode a string into a `ShortString`, or write it to storage if it is too long."},"implemented":true,"kind":"function","modifiers":[],"name":"toShortStringWithFallback","nameLocation":"2896:25:50","parameters":{"id":40052,"nodeType":"ParameterList","parameters":[{"constant":false,"id":40049,"mutability":"mutable","name":"value","nameLocation":"2936:5:50","nodeType":"VariableDeclaration","scope":40086,"src":"2922:19:50","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string"},"typeName":{"id":40048,"name":"string","nodeType":"ElementaryTypeName","src":"2922:6:50","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"},{"constant":false,"id":40051,"mutability":"mutable","name":"store","nameLocation":"2958:5:50","nodeType":"VariableDeclaration","scope":40086,"src":"2943:20:50","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"},"typeName":{"id":40050,"name":"string","nodeType":"ElementaryTypeName","src":"2943:6:50","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"2921:43:50"},"returnParameters":{"id":40056,"nodeType":"ParameterList","parameters":[{"constant":false,"id":40055,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":40086,"src":"2983:11:50","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"},"typeName":{"id":40054,"nodeType":"UserDefinedTypeName","pathNode":{"id":40053,"name":"ShortString","nameLocations":["2983:11:50"],"nodeType":"IdentifierPath","referencedDeclaration":39934,"src":"2983:11:50"},"referencedDeclaration":39934,"src":"2983:11:50","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"}},"visibility":"internal"}],"src":"2982:13:50"},"scope":40145,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":40113,"nodeType":"FunctionDefinition","src":"3368:267:50","nodes":[],"body":{"id":40112,"nodeType":"Block","src":"3477:158:50","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"id":40102,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":40099,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40090,"src":"3510:5:50","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"}],"expression":{"id":40097,"name":"ShortString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39934,"src":"3491:11:50","typeDescriptions":{"typeIdentifier":"t_type$_t_userDefinedValueType$_ShortString_$39934_$","typeString":"type(ShortString)"}},"id":40098,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"3503:6:50","memberName":"unwrap","nodeType":"MemberAccess","src":"3491:18:50","typeDescriptions":{"typeIdentifier":"t_function_unwrap_pure$_t_userDefinedValueType$_ShortString_$39934_$returns$_t_bytes32_$","typeString":"function (ShortString) pure returns (bytes32)"}},"id":40100,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3491:25:50","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":40101,"name":"FALLBACK_SENTINEL","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39938,"src":"3520:17:50","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"3491:46:50","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":40110,"nodeType":"Block","src":"3592:37:50","statements":[{"expression":{"id":40108,"name":"store","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40092,"src":"3613:5:50","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string storage pointer"}},"functionReturnParameters":40096,"id":40109,"nodeType":"Return","src":"3606:12:50"}]},"id":40111,"nodeType":"IfStatement","src":"3487:142:50","trueBody":{"id":40107,"nodeType":"Block","src":"3539:47:50","statements":[{"expression":{"arguments":[{"id":40104,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40090,"src":"3569:5:50","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"}],"id":40103,"name":"toString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40014,"src":"3560:8:50","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_userDefinedValueType$_ShortString_$39934_$returns$_t_string_memory_ptr_$","typeString":"function (ShortString) pure returns (string memory)"}},"id":40105,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3560:15:50","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}},"functionReturnParameters":40096,"id":40106,"nodeType":"Return","src":"3553:22:50"}]}}]},"documentation":{"id":40087,"nodeType":"StructuredDocumentation","src":"3233:130:50","text":" @dev Decode a string that was encoded to `ShortString` or written to storage using {toShortStringWithFallback}."},"implemented":true,"kind":"function","modifiers":[],"name":"toStringWithFallback","nameLocation":"3377:20:50","parameters":{"id":40093,"nodeType":"ParameterList","parameters":[{"constant":false,"id":40090,"mutability":"mutable","name":"value","nameLocation":"3410:5:50","nodeType":"VariableDeclaration","scope":40113,"src":"3398:17:50","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"},"typeName":{"id":40089,"nodeType":"UserDefinedTypeName","pathNode":{"id":40088,"name":"ShortString","nameLocations":["3398:11:50"],"nodeType":"IdentifierPath","referencedDeclaration":39934,"src":"3398:11:50"},"referencedDeclaration":39934,"src":"3398:11:50","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"}},"visibility":"internal"},{"constant":false,"id":40092,"mutability":"mutable","name":"store","nameLocation":"3432:5:50","nodeType":"VariableDeclaration","scope":40113,"src":"3417:20:50","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"},"typeName":{"id":40091,"name":"string","nodeType":"ElementaryTypeName","src":"3417:6:50","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"3397:41:50"},"returnParameters":{"id":40096,"nodeType":"ParameterList","parameters":[{"constant":false,"id":40095,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":40113,"src":"3462:13:50","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string"},"typeName":{"id":40094,"name":"string","nodeType":"ElementaryTypeName","src":"3462:6:50","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"3461:15:50"},"scope":40145,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":40144,"nodeType":"FunctionDefinition","src":"4020:279:50","nodes":[],"body":{"id":40143,"nodeType":"Block","src":"4125:174:50","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"id":40129,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":40126,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40117,"src":"4158:5:50","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"}],"expression":{"id":40124,"name":"ShortString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39934,"src":"4139:11:50","typeDescriptions":{"typeIdentifier":"t_type$_t_userDefinedValueType$_ShortString_$39934_$","typeString":"type(ShortString)"}},"id":40125,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"4151:6:50","memberName":"unwrap","nodeType":"MemberAccess","src":"4139:18:50","typeDescriptions":{"typeIdentifier":"t_function_unwrap_pure$_t_userDefinedValueType$_ShortString_$39934_$returns$_t_bytes32_$","typeString":"function (ShortString) pure returns (bytes32)"}},"id":40127,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4139:25:50","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":40128,"name":"FALLBACK_SENTINEL","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39938,"src":"4168:17:50","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"4139:46:50","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":40141,"nodeType":"Block","src":"4242:51:50","statements":[{"expression":{"expression":{"arguments":[{"id":40137,"name":"store","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40119,"src":"4269:5:50","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string storage pointer"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_string_storage_ptr","typeString":"string storage pointer"}],"id":40136,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4263:5:50","typeDescriptions":{"typeIdentifier":"t_type$_t_bytes_storage_ptr_$","typeString":"type(bytes storage pointer)"},"typeName":{"id":40135,"name":"bytes","nodeType":"ElementaryTypeName","src":"4263:5:50","typeDescriptions":{}}},"id":40138,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4263:12:50","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes storage pointer"}},"id":40139,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4276:6:50","memberName":"length","nodeType":"MemberAccess","src":"4263:19:50","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":40123,"id":40140,"nodeType":"Return","src":"4256:26:50"}]},"id":40142,"nodeType":"IfStatement","src":"4135:158:50","trueBody":{"id":40134,"nodeType":"Block","src":"4187:49:50","statements":[{"expression":{"arguments":[{"id":40131,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40117,"src":"4219:5:50","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"}],"id":40130,"name":"byteLength","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40046,"src":"4208:10:50","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_userDefinedValueType$_ShortString_$39934_$returns$_t_uint256_$","typeString":"function (ShortString) pure returns (uint256)"}},"id":40132,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4208:17:50","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":40123,"id":40133,"nodeType":"Return","src":"4201:24:50"}]}}]},"documentation":{"id":40114,"nodeType":"StructuredDocumentation","src":"3641:374:50","text":" @dev Return the length of a string that was encoded to `ShortString` or written to storage using\n {toShortStringWithFallback}.\n WARNING: This will return the \"byte length\" of the string. This may not reflect the actual length in terms of\n actual characters as the UTF-8 encoding of a single character can span over multiple bytes."},"implemented":true,"kind":"function","modifiers":[],"name":"byteLengthWithFallback","nameLocation":"4029:22:50","parameters":{"id":40120,"nodeType":"ParameterList","parameters":[{"constant":false,"id":40117,"mutability":"mutable","name":"value","nameLocation":"4064:5:50","nodeType":"VariableDeclaration","scope":40144,"src":"4052:17:50","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"},"typeName":{"id":40116,"nodeType":"UserDefinedTypeName","pathNode":{"id":40115,"name":"ShortString","nameLocations":["4052:11:50"],"nodeType":"IdentifierPath","referencedDeclaration":39934,"src":"4052:11:50"},"referencedDeclaration":39934,"src":"4052:11:50","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$39934","typeString":"ShortString"}},"visibility":"internal"},{"constant":false,"id":40119,"mutability":"mutable","name":"store","nameLocation":"4086:5:50","nodeType":"VariableDeclaration","scope":40144,"src":"4071:20:50","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"},"typeName":{"id":40118,"name":"string","nodeType":"ElementaryTypeName","src":"4071:6:50","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"4051:41:50"},"returnParameters":{"id":40123,"nodeType":"ParameterList","parameters":[{"constant":false,"id":40122,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":40144,"src":"4116:7:50","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":40121,"name":"uint256","nodeType":"ElementaryTypeName","src":"4116:7:50","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"4115:9:50"},"scope":40145,"stateMutability":"view","virtual":false,"visibility":"internal"}],"abstract":false,"baseContracts":[],"canonicalName":"ShortStrings","contractDependencies":[],"contractKind":"library","documentation":{"id":39935,"nodeType":"StructuredDocumentation","src":"378:876:50","text":" @dev This library provides functions to convert short memory strings\n into a `ShortString` type that can be used as an immutable variable.\n Strings of arbitrary length can be optimized using this library if\n they are short enough (up to 31 bytes) by packing them with their\n length (1 byte) in a single EVM word (32 bytes). Additionally, a\n fallback mechanism can be used for every other case.\n Usage example:\n ```solidity\n contract Named {\n     using ShortStrings for *;\n     ShortString private immutable _name;\n     string private _nameFallback;\n     constructor(string memory contractName) {\n         _name = contractName.toShortStringWithFallback(_nameFallback);\n     }\n     function name() external view returns (string memory) {\n         return _name.toStringWithFallback(_nameFallback);\n     }\n }\n ```"},"fullyImplemented":true,"linearizedBaseContracts":[40145],"name":"ShortStrings","nameLocation":"1263:12:50","scope":40146,"usedErrors":[39942,39944],"usedEvents":[]}],"license":"MIT"},"id":50}